<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="icon" href="/css/favicon.ico"/><title>@magic/css</title><meta name="description" content="parse/stringify/write css in js"/><script type="application/ld+json">{"@context":"http://schema.org","@type":"website","name":"@magic/css"}</script><link rel="stylesheet" href="/css/magic.css?FCjqG/8JSZ" integrity="sha384-FCjqG/8JSZCq+t4tv4rW2ElMhQMf1VViT46Rjmozvg+k+dgJ2QuNwnnxQLckrr4P" crossorigin="anonymous"/></head><body><a class="SkipLink" href="/css/#page">Skip to Content</a><main id="Magic"><div class="Wrapper"><header class="Header"><a class="Logo" href="" target="_blank" rel="noopener"><span>@magic/css</span></a><nav class="Menu"><ul><li><a href="/css/#installation">installation</a></li><li><a href="/css/#import">import</a></li><li><a href="/css/#api">api</a></li><li><a href="/css/#styles">styles</a></li><li><a href="/css/#changelog">changelog</a></li><li><a href="/css/#source">source</a></li></ul></nav></header><div class="Page" id="page"><h2>@magic/css</h2><p>parse/stringify/write css in js</p><p>NO dynamic css, css gets output as css file. whenever possible, use dynamic classes instead.</p><p>if there is absolute need for dynamic css, feel free to use the style property of the html tag / webcomponent you want to dynamically change, unfortunately, this library will not help you with that.</p><ul class="GitBadges"><li><a href="https://www.npmjs.com/package/@magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/v/@magic/css.svg" role="presentation" alt=""/></a></li><li><img src="https://img.shields.io/node/v/@magic/core" role="presentation" alt=""/></li><li><a href="https://travis-ci.com/magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/travis/com/magic/css/master" role="presentation" alt=""/></a></li><li><a href="https://ci.appveyor.com/project/magic/css/branch/master" target="_blank" rel="noopener"><img src="https://img.shields.io/appveyor/ci/magic/css/master.svg" role="presentation" alt=""/></a></li><li><a href="https://coveralls.io/github/magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/coveralls/github/magic/css/master.svg" role="presentation" alt=""/></a></li><li><a href="https://greenkeeper.io" target="_blank" rel="noopener"><img src="https://badges.greenkeeper.io/magic/css.svg" role="presentation" alt=""/></a></li><li><a href="https://snyk.io/test/github/magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/snyk/vulnerabilities/github/magic/css.svg" role="presentation" alt=""/></a></li></ul><h2 id="installation">installation</h2><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">npm install @magic/css</code></pre></div><h2 id="usage">usage</h2><h3 id="import">import</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">import</span> css from <span class="string">&#39;@magic/css&#39;</span></code></pre></div><h2 id="api">api</h2><h3 id="api-css">css (full result)</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">import</span> css from <span class="string">&#39;css&#39;</span></code><code class="line"></code><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="colon">body</span>: {</code><code class="line">    <span class="colon">color</span>: <span class="string">&#39;green&#39;</span>,</code><code class="line">  },</code><code class="line">  <span class="string">&#39;.<span class="keyword">class</span>&#39;</span>: {</code><code class="line">    <span class="colon">color</span>: <span class="string">&#39;orange&#39;</span>,</code><code class="line">  },</code><code class="line">  <span class="string">&#39;#id&#39;</span>: {</code><code class="line">    <span class="colon">color</span>: <span class="string">&#39;purple&#39;</span></code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line">css(style)</code><code class="line"></code><code class="line"><span class="comment">// returns</span></code><code class="line"><span class="builtin">Object</span> {</code><code class="line"><span class="comment">  // nicely formatted css string</span></code><code class="line">  <span class="colon">css</span>: <span class="string">&#39;body {\n  <span class="colon">color</span>: green;\n}\<span class="object">n</span>.<span class="keyword">class</span> {\n  <span class="colon">color</span>: orange;\n}\n#id{\n  <span class="colon">color</span>: purple;\n}\n&#39;</span>,</code><code class="line"><span class="comment">  // minimal whitespace</span></code><code class="line">  <span class="colon">minified</span>: <span class="string">&#39;body{<span class="colon">color</span>:green}.<span class="keyword">class</span>{<span class="colon">color</span>:orange}#id{<span class="colon">color</span>:purple}&#39;</span>,</code><code class="line"><span class="comment">  // array of used classes <span class="keyword">if</span> any</span></code><code class="line">  <span class="colon">classes</span>: [<span class="string">&#39;.<span class="keyword">class</span>&#39;</span>],</code><code class="line"><span class="comment">  // array of used ids <span class="keyword">if</span> any</span></code><code class="line">  <span class="colon">ids</span>: [<span class="string">&#39;#id&#39;</span>],</code><code class="line"><span class="comment">  // array of used selectors</span></code><code class="line">  <span class="colon">selectors</span>: [],</code><code class="line"><span class="comment">  // st of <span class="keyword">this</span> css object</span></code><code class="line">  <span class="colon">parsed</span>: [],</code><code class="line">}</code></pre></div><h3 id="api-parse">parse</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.<span class="property">className</span>&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;orange&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="object">css</span>.<span class="property">parse</span>(style)</code><code class="line"><span class="comment">// ast</span></code></pre></div><h3 id="api-stringify">stringify</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.<span class="property">className</span>&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;white&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"><span class="comment">// minified string</span></code><code class="line">`.className #id{<span class="colon">color</span>:white;}`</code></pre></div><h3 id="api-write">write to filesystem</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.<span class="property">className</span>&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="object">opts</span>.<span class="property">textColor</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="comment">// writes styles to ./<span class="object">out</span>.<span class="property">css</span></span></code><code class="line"><span class="object">css</span>.<span class="property">write</span>(style)</code><code class="line"><span class="comment">// writes styles to ./<span class="object">outfile</span>.<span class="property">css</span></span></code><code class="line"><span class="object">css</span>.<span class="property">write</span>(style, { <span class="colon">OUTFILE</span>: <span class="string">&#39;./<span class="object">outfile</span>.<span class="property">css</span>&#39;</span> })</code></pre></div><h2 id="styles">styles</h2><p>styles are a javascript object. the keys are selectors and the values are nested objects of css rules, where the keys of the objects are assumed to be selectors unless the value associated with the key is not an object</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;.<span class="property">className</span>&#39;</span>: {</code><code class="line">  <span class="colon">color</span>: <span class="string">&#39;green&#39;</span>,</code><code class="line">},</code><code class="line">}</code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"><span class="comment">// .<span class="property">className</span> { <span class="colon">color</span>:green; }</span></code></pre></div><h3 id="styles-pseudo-classes">pseudo classes: (:hover, :active)</h3><p>css pseudo classes in nested css get found if their object key starts with a &amp;</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;div&#39;</span>: {</code><code class="line">  <span class="colon">color</span>: <span class="string">&#39;red&#39;</span>,</code><code class="line">  <span class="string">&#39;&amp;:hover&#39;</span>: {</code><code class="line">    <span class="colon">color</span>: <span class="string">&#39;green&#39;</span>,</code><code class="line">  },</code><code class="line">},</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"><span class="comment">// div { <span class="colon">color</span>: red; }</span></code><code class="line"><span class="comment">// <span class="colon">div</span>:hover { <span class="colon">color</span>: green; }</span></code></pre></div><h3 id="styles-selector-nesting">selector nesting</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;div&#39;</span>: {</code><code class="line">  <span class="string">&#39;<span class="colon">p</span>, &amp;:hover&#39;</span>: {</code><code class="line">    <span class="colon">color</span>: <span class="string">&#39;red&#39;</span>,</code><code class="line">  },</code><code class="line">},</code><code class="line">}</code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"><span class="comment">// div p, <span class="colon">div</span>:hover { <span class="colon">color</span>: red; }</span></code></pre></div><h3 id="styles-prefix-without-space">prefix without space</h3><p>to prefix the parent of the selector using the child selectors, add a &amp; at the end of any selectors but the last one.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.<span class="keyword">class</span>&#39;</span>: {</code><code class="line">    <span class="string">&#39;<span class="colon">p</span>&amp;, :hover&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;orange&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"></code><code class="line"><span class="comment">// <span class="object">p</span>.<span class="keyword">class</span>, .<span class="colon">class</span>:hover { <span class="colon">color</span>: orange; }</span></code></pre></div><h3 id="styles-prefix-all-without-space">prefix all without space</h3><p>if the &amp; is at the end of a selector, the &amp; will be applied to each of them.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.<span class="keyword">class</span>&#39;</span>: {</code><code class="line">    <span class="string">&#39;div, p&amp;&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;orange&#39;</span>;</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"></code><code class="line"><span class="comment">// <span class="object">div</span>.<span class="keyword">class</span>, <span class="object">p</span>.<span class="keyword">class</span> { <span class="colon">color</span>: orange; }</span></code></pre></div><h3 id="styles-prefix-with-space">prefix with space</h3><p>to prefix the parent with a space, use a double &amp;&amp; instead of a single &amp;</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;#id&#39;</span>: {</code><code class="line">    <span class="string">&#39;.<span class="property">class2</span>&amp;&amp;, .class3&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;orange&#39;</span>;</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"></code><code class="line"><span class="comment">// .<span class="property">class2</span> #id, #<span class="object">id</span>.<span class="property">class3</span> { <span class="colon">color</span>: orange; }</span></code></pre></div><h3 id="styles-prefix-all-with-space">prefix all with space</h3><p>if the &amp;&amp; is at the end of a selector, the &amp;&amp; will be applied to each of them.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.<span class="keyword">class</span>&#39;</span>: {</code><code class="line">    <span class="string">&#39;div, p&amp;&amp;&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;orange&#39;</span>;</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"></code><code class="line"><span class="comment">// div .<span class="keyword">class</span>, p .<span class="keyword">class</span> { <span class="colon">color</span>: orange; }</span></code></pre></div><h3 id="styles-media-queries">media queries</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;@media screen and (min-<span class="colon">width</span>: 500px)&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="object">opts</span>.<span class="property">textColor</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"><span class="comment">// css string</span></code><code class="line">`</code><code class="line">@media screen and (min-<span class="colon">width</span>: 500px) {</code><code class="line">  #id {</code><code class="line">    <span class="colon">color</span>: green;</code><code class="line">  }</code><code class="line">}</code><code class="line">`</code></pre></div><h3 id="styles-keyframes">keyframes for animations</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;@keyframes anim-name&#39;</span>: {</code><code class="line">  from {</code><code class="line">    <span class="colon">opacity</span>: 0,</code><code class="line">  },</code><code class="line">  to {</code><code class="line">    <span class="colon">opacity</span>: 1,</code><code class="line">  }</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"></code><code class="line"><span class="comment">// css string</span></code><code class="line">`</code><code class="line">@keyframes anim-name {</code><code class="line">  from {</code><code class="line">    <span class="colon">opacity</span>: 0;</code><code class="line">  }</code><code class="line">  to {</code><code class="line">    <span class="colon">opacity</span>: 1;</code><code class="line">  }</code><code class="line">}</code><code class="line">`</code></pre></div><h3 id="styles-webfonts">webfonts</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;@font-face&#39;</span>: {</code><code class="line">    <span class="colon">fontFamily</span>: <span class="string">&#39;font-name&#39;</span>,</code><code class="line">    <span class="colon">fontDir</span>: <span class="string">&#39;/fonts/&#39;</span>,</code><code class="line">    <span class="colon">fontStyle</span>: <span class="string">&#39;normal&#39;</span>,</code><code class="line">    <span class="colon">fontWeight</span>: <span class="string">&#39;normal&#39;</span>,</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> <span class="object">css</span>.<span class="property">stringify</span>(style)</code><code class="line"><span class="comment">// css string</span></code><code class="line">`</code><code class="line">@font-face {</code><code class="line">  font-<span class="colon">family</span>: <span class="string">&#39;font-name&#39;</span>;</code><code class="line">  font-<span class="colon">style</span>: normal;</code><code class="line">  font-<span class="colon">weight</span>: normal;</code><code class="line">  <span class="colon">src</span>: url(<span class="string">&#39;/fonts/font-<span class="object">name</span>.<span class="property">eot</span>&#39;</span>);</code><code class="line">  <span class="colon">src</span>: url(<span class="string">&#39;/fonts/font-<span class="object">name</span>.<span class="property">eot</span>#iefix&#39;</span>) format(<span class="string">&#39;embedded-opentype&#39;</span>),<span class="string">&#39;,&#39;</span></code><code class="line">  url(<span class="string">&#39;/fonts/font-<span class="object">name</span>.<span class="property">ttf</span>&#39;</span>) format(<span class="string">&#39;truetype&#39;</span>),<span class="string">&#39;,&#39;</span></code><code class="line">  url(<span class="string">&#39;/fonts/font-<span class="object">name</span>.<span class="property">woff</span>&#39;</span>) format(<span class="string">&#39;woff&#39;</span>),<span class="string">&#39;,&#39;</span></code><code class="line">  url(<span class="string">&#39;/fonts/font-<span class="object">name</span>.<span class="property">woff2</span>&#39;</span>) format(<span class="string">&#39;woff2&#39;</span>),<span class="string">&#39;,&#39;</span></code><code class="line">  url(<span class="string">&#39;/fonts/font-<span class="object">name</span>.<span class="property">svg</span>#font-name&#39;</span>) format(<span class="string">&#39;svg&#39;</span>);<span class="string">&#39;,&#39;</span></code><code class="line">}</code><code class="line">`</code></pre></div><div id="changelog"><h2>CHANGELOG</h2><h4 id="changelog-v-0.1.0">0.1.0</h4><ul><li>return classes and ids as separate objects additionally to selectors</li></ul><h4 id="changelog-v-0.2.0">0.2.0</h4><ul><li>Added media queries</li></ul><h4 id="changelog-v-0.3.0">0.3.0</h4><ul><li>returns a promise! no longer sync</li><li>autoprefixer and postcss added</li></ul><h4 id="changelog-v-0.4.0">0.4.0</h4><ul><li>supports @font-face declarations</li></ul><h4 id="changelog-v-0.4.1">0.4.1</h4><ul><li>added fontDir option to font-face declarations</li></ul><h4 id="changelog-v-0.4.2">0.4.2</h4><ul><li>update deps to fix security issues</li></ul><h4 id="changelog-v-0.4.3">0.4.3</h4><ul><li>added @keyframes for animations</li></ul><h4 id="changelog-v-0.4.4">0.4.4</h4><ul><li>css.parse now converts deep arrays into one object before parsing</li></ul><h4 id="changelog-v-0.4.5">0.4.5</h4><ul><li>css.stringify now makes a bit nicer mediaquery and keyframe links.</li><li>css.parse should now order media queries to the end of the css.</li></ul><h4 id="changelog-v-0.4.6">0.4.6</h4><ul><li>css.parse does a better job of keeping order of incoming objects intact</li></ul><h4 id="changelog-v-0.4.7">0.4.7</h4><ul><li>FIX: multiple parent selectors &#39;h1,h2,h3&#39; that should get appended with a &amp;:hover etc suffix now correctly append that suffix to every parent</li><li>FEATURE: &amp; can be at the end of a selector to prepend a parent</li></ul></div><h4 id="changelog-v-0.5.0">0.5.0</h4><ul><li>FIX: css gets returned in almost the same order it got passed in. turns out that javascript objects do not make this as easy as hoped.</li></ul><h4 id="changelog-v-0.5.0">0.6.0</h4><ul><li>use esmodules</li></ul><h4 id="changelog-v-0.7.0">0.7.0</h4><p>update @magic/types to not break if es modules get passed into the styles</p><h4>0.7.1</h4><p>update @magic/deep to use ecmascript module version</p><p>update postcss, autoprefixer</p><h4>0.7.2</h4><p>update dependencies</p><h4>0.7.3</h4><p>update dependencies</p><h4>0.7.4</h4><p>add @magic/log to dependencies</p><h4>0.7.5</h4><p>update autoprefixer</p><h4>0.7.6</h4><p>update postcss</p><h2 id="source">source</h2><p>the source for this page is in the <a href="https://github.com/magic/css/tree/master/example" target="_blank" rel="noopener">example directory</a> and gets built and published to github using <a href="https://github.com/magic/core" target="_blank" rel="noopener">@magic/core</a></p></div><footer class="Footer"><div class="Container"><div class="Credits">made with a few bits of <a target="_blank" rel="noopener" href="https://github.com/magic/core">magic</a></div></div></footer></div></main><script src="/css/magic.js?OYkDJKXQ86" integrity="sha384-OYkDJKXQ86jh+pUaFGWJsAQHOyuH5i8Tq8uuNHyKoO2lKICcT9gQwXiX2CjPtrc9" crossorigin="anonymous"></script></body></html>