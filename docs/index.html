<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Permissions-Policy" content="interest-cohort=()"/><link rel="icon" href="/css/favicon.ico"/><title>@magic/css</title><meta name="description" content="parse/stringify/write css in js"/><script type="application/ld+json">{"@context":"http://schema.org","@type":"website","name":"@magic/css"}</script><link rel="stylesheet" href="/css/magic.css?juIqF6iSxu" integrity="sha384-juIqF6iSxu6BI1dlGuy+0Ryk2Nw4DfCpyNNhd6CByYQ2GKZnGIJuVg3EuR6OslAL" crossorigin="anonymous"/></head><body><a class="SkipLink" href="/css/#page">Skip to Content</a><main id="Magic"><div class="Wrapper"><header class="Header"><a class="Logo" href="/css/"><svg viewBox="0 0 512 444"><path d="M512 444L256 0 0 444z" fill="#663695"></path><circle cx="256" cy="294" r="130" fill="#fff"></circle><circle cx="256" cy="281" r="40" fill="#663695"></circle><path d="M256 350v44m24-44l1 13c1 27 29 27 29-7m-160-72s46-47 106-47c59 0 106 47 106 47s-47 43-106 43c-60 0-106-43-106-43zm65-75a134 134 0 0189 2" class="stroke"></path><path d="M256 81v53m184 270l-43-29M72 404l43-29" class="stroke white"></path></svg></a><p>@magic/css</p><nav class="Menu"><ul><li><a href="/css/#installation">installation</a></li><li><a href="/css/#cli">cli</a></li><li><a href="/css/#import">import</a></li><li><a href="/css/#api">api</a></li><li><a href="/css/#styles">styles</a></li><li><a href="/css/#source">source</a></li></ul></nav></header><div class="Page" id="page"><h2>@magic/css</h2><p>parse/stringify/write css in js</p><p>NO dynamic css, css gets output as css file. whenever possible, use dynamic classes instead.</p><p>if there is absolute need for dynamic css, feel free to use the style property of the html tag / webcomponent you want to dynamically change, unfortunately, this library will not help you with that.</p><ul class="GitBadges"><li><a href="https://www.npmjs.com/package/@magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/v/@magic/css?color=blue" height="23" role="presentation" alt="" loading="lazy"/></a></li><li><img src="https://img.shields.io/node/v/@magic/css?color=blue" height="23" role="presentation" alt="" loading="lazy"/></li><li><img src="https://img.shields.io/npm/l/@magic/css?color=blue" height="23" role="presentation" alt="" loading="lazy"/></li><li><a href="https://travis-ci.com/magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/travis/com/magic/css/master" height="23" role="presentation" alt="" loading="lazy"/></a></li><li><a href="https://ci.appveyor.com/project/magic/css/branch/master" target="_blank" rel="noopener"><img src="https://img.shields.io/appveyor/ci/magic/css/master.svg" height="23" role="presentation" alt="" loading="lazy"/></a></li><li><a href="https://coveralls.io/github/magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/coveralls/github/magic/css/master.svg" height="23" role="presentation" alt="" loading="lazy"/></a></li><li><a href="https://snyk.io/test/github/magic/css" target="_blank" rel="noopener"><img src="https://img.shields.io/snyk/vulnerabilities/github/magic/css.svg" height="23" role="presentation" alt="" loading="lazy"/></a></li></ul><h2 id="installation">installation</h2><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">npm</span> <span class="keyword">install</span> --save-exact @magic/css</code></pre></div><h2 id="usage">usage:</h2><h4 id="cli">cli:</h4><p>@magic/css includes a cli script that can handle most usecases the internal javascript api allows.</p><p>to use this cli from any directory, <div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">npm</span> <span class="keyword">install</span> -g <a href="@magic.css" target="_blank" rel="noopener">@magic.css</a></code></pre></div> is a useful shortcut. after the global install, you can just call `mcss` from anywhere in your terminal to see the help.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">@magic/css</code><code class="line">commands:</code><code class="line">stringify - convert css <span class="keyword">in</span> js to css</code><code class="line">parse     - convert css <span class="keyword">in</span> js to an array of key value pairs</code><code class="line">full      - <span class="keyword">get</span> a full result object.</code><code class="line"></code><code class="line">flags:</code><code class="line">--minified - output minified css - alias: [<span class="string">&quot;--m&quot;</span>, <span class="string">&quot;-m&quot;</span>]</code><code class="line">--help     - alias: [<span class="string">&quot;-h&quot;</span>]</code><code class="line">--out      - directory to write output files to. omit to print to stdout - alias: [<span class="string">&quot;--o&quot;</span>, <span class="string">&quot;-o&quot;</span>]</code><code class="line">--in       - directory <span class="keyword">with</span> source files, needs index.js to exist - alias: [<span class="string">&quot;--i&quot;</span>, <span class="string">&quot;-i&quot;</span>]</code><code class="line"></code><code class="line">examples:</code><code class="line">mcss parse --in ./css --out ./css</code><code class="line">mcss stringify --in ./styles --out ./css</code></pre></div><h3 id="import">import</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">import</span> css from <span class="string">&#39;@magic/css&#39;</span></code></pre></div><h2 id="api">api</h2><h3 id="api-css">css (full result)</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">import</span> css from <span class="string">&#39;css&#39;</span></code><code class="line"></code><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  body: {</code><code class="line">    color: <span class="string">&#39;green&#39;</span>,</code><code class="line">  },</code><code class="line">  <span class="string">&#39;.class&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;orange&#39;</span>,</code><code class="line">  },</code><code class="line">  <span class="string">&#39;#id&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;purple&#39;</span></code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> css(style)</code><code class="line"></code><code class="line"><span class="comment">// returns</span></code><code class="line"><span class="builtin">Object</span> {</code><code class="line">  <span class="comment">// nicely formatted css string</span></code><code class="line">  css: <span class="string">&#39;body {\n  color: green;\n}\n.class {\n  color: orange;\n}\n#id{\n  color: purple;\n}\n&#39;</span>,</code><code class="line">  <span class="comment">// minimal whitespace</span></code><code class="line">  minified: <span class="string">&#39;body{color:green}.class{color:orange}#id{color:purple}&#39;</span>,</code><code class="line">  <span class="comment">// array of used classes <span class="keyword">if</span> any</span></code><code class="line">  classes: [<span class="string">&#39;.class&#39;</span>],</code><code class="line">  <span class="comment">// array of used ids <span class="keyword">if</span> any</span></code><code class="line">  ids: [<span class="string">&#39;#id&#39;</span>],</code><code class="line">  <span class="comment">// array of used selectors</span></code><code class="line">  selectors: [],</code><code class="line">  <span class="comment">//ast of <span class="keyword">this</span> css object</span></code><code class="line">  parsed: [],</code><code class="line">}</code></pre></div><h3 id="api-parse">parse</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.className&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      color: <span class="string">&#39;orange&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">const</span> ast = css.parse(style)</code><code class="line"><span class="comment">// ast</span></code><code class="line">[[<span class="string">&#39;.className #id&#39;</span>, { color: <span class="string">&#39;orange&#39;</span> } ]]</code></pre></div><h3 id="api-stringify">stringify</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.className&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      color: <span class="string">&#39;white&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"><span class="comment">// minified string</span></code><code class="line">`.className #id{color:white;}`</code></pre></div><h3 id="api-write">write to filesystem</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.className&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      color: opts.textColor,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="comment">// writes styles to ./out.css</span></code><code class="line">css.write(style)</code><code class="line"><span class="comment">// writes styles to ./outfile.css</span></code><code class="line">css.write(style, { OUTFILE: <span class="string">&#39;./outfile.css&#39;</span> })</code></pre></div><h2 id="styles">styles</h2><p>styles are a javascript object. the keys are selectors and the values are nested objects of css rules, where the keys of the objects are assumed to be selectors unless the value associated with the key is not an object</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;.className&#39;</span>: {</code><code class="line">  color: <span class="string">&#39;green&#39;</span>,</code><code class="line">},</code><code class="line">}</code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"><span class="comment">// .className { color:green; }</span></code></pre></div><h3 id="styles-pseudo-classes">pseudo classes: (:hover, :active)</h3><p>css pseudo classes in nested css get found if their object key starts with a &amp;</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;div&#39;</span>: {</code><code class="line">  color: <span class="string">&#39;red&#39;</span>,</code><code class="line">  <span class="string">&#39;&amp;:hover&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;green&#39;</span>,</code><code class="line">  },</code><code class="line">},</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"><span class="comment">// div { color: red; }</span></code><code class="line"><span class="comment">// div:hover { color: green; }</span></code></pre></div><h3 id="styles-selector-nesting">selector nesting</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;div&#39;</span>: {</code><code class="line">  <span class="string">&#39;p, &amp;:hover&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;red&#39;</span>,</code><code class="line">  },</code><code class="line">},</code><code class="line">}</code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"><span class="comment">// div p, div:hover { color: red; }</span></code></pre></div><h3 id="styles-prefix-without-space">prefix without space</h3><p>to prefix the parent of the selector using the child selectors, add a &amp; at the end of any selectors but the last one.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.class&#39;</span>: {</code><code class="line">    <span class="string">&#39;p&amp;, :hover&#39;</span>: {</code><code class="line">      color: <span class="string">&#39;orange&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line"><span class="comment">// p.class, .class:hover { color: orange; }</span></code></pre></div><h3 id="styles-prefix-all-without-space">prefix all without space</h3><p>if the &amp; is at the end of a selector, the &amp; will be applied to each of them.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.class&#39;</span>: {</code><code class="line">    <span class="string">&#39;div, p&amp;&#39;</span>: {</code><code class="line">      color: <span class="string">&#39;orange&#39;</span>;</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line"><span class="comment">// div.class, p.class { color: orange; }</span></code></pre></div><h3 id="styles-prefix-with-space">prefix with space</h3><p>to prefix the parent with a space, use a double &amp;&amp; instead of a single &amp;</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;#id&#39;</span>: {</code><code class="line">    <span class="string">&#39;.class2&amp;&amp;, .class3&#39;</span>: {</code><code class="line">      color: <span class="string">&#39;orange&#39;</span>;</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line"><span class="comment">// .class2 #id, #id.class3 { color: orange; }</span></code></pre></div><h3 id="styles-prefix-all-with-space">prefix all with space</h3><p>if the &amp;&amp; is at the end of a selector, the &amp;&amp; will be applied to each of them.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.class&#39;</span>: {</code><code class="line">    <span class="string">&#39;div, p&amp;&amp;&#39;</span>: {</code><code class="line">      color: <span class="string">&#39;orange&#39;</span>;</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line"><span class="comment">// div .class, p .class { color: orange; }</span></code></pre></div><h3 id="styles-media-queries">media queries</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;@media screen and (min-width: 500px)&#39;</span>: {</code><code class="line">    <span class="string">&#39;#id&#39;</span>: {</code><code class="line">      color: opts.textColor,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"><span class="comment">// css string</span></code><code class="line">`</code><code class="line">@media screen and (min-width: 500px) {</code><code class="line">  #id {</code><code class="line">    color: green;</code><code class="line">  }</code><code class="line">}</code><code class="line">`</code></pre></div><h3 id="styles-keyframes">keyframes for animations</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line"><span class="string">&#39;@keyframes anim-name&#39;</span>: {</code><code class="line">  from: {</code><code class="line">    opacity: 0,</code><code class="line">  },</code><code class="line">  to: {</code><code class="line">    opacity: 1,</code><code class="line">  }</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line"><span class="comment">// css string</span></code><code class="line">`</code><code class="line">@keyframes anim-name {</code><code class="line">  from {</code><code class="line">    opacity: 0;</code><code class="line">  }</code><code class="line">  to {</code><code class="line">    opacity: 1;</code><code class="line">  }</code><code class="line">}</code><code class="line">`</code></pre></div><h3 id="styles-webfonts">webfonts</h3><h4>Font V2</h4><p>This approach allows definition of font-style, font-weight, and local font names.</p><h5>Pseudocode</h5><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">@font-face: {</code><code class="line">  family: <span class="string">&#39;name&#39;</span>,</code><code class="line">  url: <span class="string">&#39;/fonts/&#39;</span>,</code><code class="line">  styles: {</code><code class="line">    (normal|italic): {</code><code class="line">      weight: [<span class="string">&#39;LocalName&#39;</span>, <span class="string">&#39;Local Name&#39;</span>]</code><code class="line">    }</code><code class="line">  }</code><code class="line">}</code></pre></div><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">    <span class="string">&#39;@font-face&#39;</span>: {</code><code class="line">      family: <span class="string">&#39;font-name&#39;</span>,</code><code class="line">      url: <span class="string">&#39;/fonts/&#39;</span>,</code><code class="line">      styles: {</code><code class="line">        normal: {</code><code class="line">          400: [<span class="string">&#39;FontName&#39;</span>, <span class="string">&#39;Font Name&#39;</span>],</code><code class="line">          600: [<span class="string">&#39;FontNameBold&#39;</span>, <span class="string">&#39;Font Name Bold&#39;</span>]</code><code class="line">        },</code><code class="line">        italic: {</code><code class="line">          400: [<span class="string">&#39;FontNameItalic&#39;</span>, <span class="string">&#39;Font Name Italic&#39;</span>],</code><code class="line">        },</code><code class="line">      },</code><code class="line">    },</code><code class="line">  }</code><code class="line"></code><code class="line">  <span class="keyword">const</span> out = <span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line">  <span class="comment">// out.css string</span></code><code class="line">  @font-face {</code><code class="line">    font-family: <span class="string">&#39;font-name&#39;</span>;</code><code class="line">    font-style: normal;</code><code class="line">    font-weight: 400;</code><code class="line">    src:</code><code class="line">      local(<span class="string">&#39;FontName&#39;</span>),</code><code class="line">      local(<span class="string">&#39;Font Name&#39;</span>),</code><code class="line">      url(<span class="string">&#39;/fonts/font-name-400-normal.woff2&#39;</span>) format(<span class="string">&#39;woff2&#39;</span>);</code><code class="line">  }</code><code class="line"></code><code class="line">  @font-face {</code><code class="line">    font-family: <span class="string">&#39;font-name&#39;</span>;</code><code class="line">    font-style: normal;</code><code class="line">    font-weight: 600;</code><code class="line">    src:</code><code class="line">      local(<span class="string">&#39;FontNameBold&#39;</span>),</code><code class="line">      local(<span class="string">&#39;Font Name Bold&#39;</span>),</code><code class="line">      url(<span class="string">&#39;/fonts/font-name-600-normal.woff2&#39;</span>) format(<span class="string">&#39;woff2&#39;</span>);</code><code class="line">  }</code><code class="line"></code><code class="line">  @font-face {</code><code class="line">    font-family: <span class="string">&#39;font-name&#39;</span>;</code><code class="line">    font-style: italic;</code><code class="line">    font-weight: 400;</code><code class="line">    src:</code><code class="line">      local(<span class="string">&#39;FontNameItalic&#39;</span>),</code><code class="line">      local(<span class="string">&#39;Font Name Italic&#39;</span>),</code><code class="line">      url(<span class="string">&#39;/fonts/font-name-400-italic.woff2&#39;</span>) format(<span class="string">&#39;woff2&#39;</span>);</code><code class="line">  }</code></pre></div><h4>Font V1 - DEPRECATED</h4><p>This approach does not allow definition of local fonts to load, and therefore is deprecated.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">const</span> style = {</code><code class="line">    <span class="string">&#39;@font-face&#39;</span>: {</code><code class="line">      family: <span class="string">&#39;font-name&#39;</span>,</code><code class="line">      url: <span class="string">&#39;/fonts/&#39;</span>,</code><code class="line">      styles: [<span class="string">&#39;normal&#39;</span>, <span class="string">&#39;italic&#39;</span>],</code><code class="line">      weights: [400, 600],</code><code class="line">    },</code><code class="line">  }</code><code class="line"></code><code class="line">  <span class="keyword">const</span> out = <span class="keyword">await</span> css.stringify(style)</code><code class="line"></code><code class="line">  <span class="comment">// out.css string</span></code><code class="line"></code><code class="line">  @font-face {</code><code class="line">    font-family: <span class="string">&#39;font-name&#39;</span>;</code><code class="line">    font-style: normal;</code><code class="line">    font-weight: normal;</code><code class="line">    src: url(<span class="string">&#39;/fonts/font-name-400-normal.eot&#39;</span>);</code><code class="line">    src: url(<span class="string">&#39;/fonts/font-name-400-normal.eot#iefix&#39;</span>) format(<span class="string">&#39;embedded-opentype&#39;</span>),&#39;,</code><code class="line">    url(<span class="string">&#39;/fonts/font-name-400-normal.ttf&#39;</span>) format(<span class="string">&#39;truetype&#39;</span>),&#39;,</code><code class="line">    url(<span class="string">&#39;/fonts/font-name-400-normal.woff&#39;</span>) format(<span class="string">&#39;woff&#39;</span>),&#39;,</code><code class="line">    url(<span class="string">&#39;/fonts/font-name-400-normal.woff2&#39;</span>) format(<span class="string">&#39;woff2&#39;</span>),&#39;,</code><code class="line">    url(<span class="string">&#39;/fonts/font-name-400-normal.svg#font-name&#39;</span>) format(<span class="string">&#39;svg&#39;</span>);&#39;,</code><code class="line">  }</code><code class="line"></code><code class="line">  <span class="comment">// ... repeated <span class="keyword">for</span> all styles and weights that were defined</span></code></pre></div><h2 id="source">source</h2><p>the source for this page is in the <a href="https://github.com/magic/css/tree/master/example" target="_blank" rel="noopener">example directory</a> and gets built and published to github using <a href="https://github.com/magic/core" target="_blank" rel="noopener">@magic/core</a></p></div><footer class="Footer"><div class="Container"><div class="Credits">made with a few bits of <a target="_blank" rel="noopener" href="https://magic.github.io/">magic</a></div></div></footer></div></main><script src="/css/magic.js?SNnw+5Zslr" integrity="sha384-SNnw+5ZslrDAHE0ieYBtTYk03tDZFr4JWI2mNP3M1Kp47jAmoF1QE8MsQlQryx0A" crossorigin="anonymous"></script></body></html>